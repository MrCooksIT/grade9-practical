<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grade 9 HTML/CSS Practical</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb {
            background: #a8a8a8;
            border-radius: 10px;
        }
        textarea::-webkit-scrollbar-thumb:hover {
            background: #888;
        }
        iframe {
            border: none;
        }

        .btn {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .btn-run {
            background-color: #4CAF50;
        }
        .btn-run:hover {
            background-color: #45a049;
        }
        .btn-copy {
            background-color: #f59e0b;
        }
        .btn-copy:hover {
            background-color: #d97706;
        }

        /* Tab Styles */
        .tab-btn {
            padding: 0.5rem 1rem;
            font-weight: 500;
            color: #4b5563;
            border-right: 1px solid #d1d5db;
            background-color: #e5e7eb;
            cursor: pointer;
            font-size: 0.875rem;
        }
        .tab-btn:hover {
            background-color: #f3f4f6;
        }
        .tab-btn.active {
            background-color: #ffffff;
            font-weight: 600;
            color: #1f2937;
            border-bottom: 1px solid #ffffff; 
            margin-bottom: -1px;
        }
        .question-panel {
            display: none;
            width: 100%;
            height: 100%;
        }
        .question-panel.active {
            display: flex;
            flex-direction: column;
        }
        .question-panel textarea {
            width: 100%;
            flex: 1;
            border: none;
        }
    </style>
</head>
<body class="bg-gray-100">

    <div class="flex flex-col h-screen">
        
        <!-- Header - More compact -->
        <header class="bg-gray-100 text-gray-800 p-2 shadow-sm z-10 flex items-center space-x-3 border-b border-gray-300">
            <h1 class="text-lg md:text-xl font-bold text-blue-600 ml-1">Grade 9 Practical</h1>
            <button id="run-button" class="btn btn-run text-base px-4 py-1.5">
                ‚ñ∫ Run
            </button>
            <a href="secret-game.html" style="font-size: 0.9rem; opacity: 0.25; text-decoration: none; transition: opacity 0.3s;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='0.25'" title="üéÆ">üêç</a>
            <a href="aim-trainer.html" style="font-size: 0.9rem; opacity: 0.25; text-decoration: none; transition: opacity 0.3s;" onmouseover="this.style.opacity='0.9'" onmouseout="this.style.opacity='0.25'" title="üéØ">üéØ</a>
        </header>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col lg:flex-row overflow-hidden">

            <!-- Editor Panels Container -->
            <div class="w-full lg:w-1/2 flex flex-col overflow-hidden">

                <!-- Tab Navigation with Copy Button integrated -->
                <div class="flex items-center border-b border-gray-300 bg-gray-200 z-10">
                    <div class="flex overflow-x-auto">
                        <button id="tab-q5" class="tab-btn active">Q5</button>
                        <button id="tab-q6" class="tab-btn">Q6</button>
                        <button id="tab-q7" class="tab-btn">Q7</button>
                        <button id="tab-q8" class="tab-btn">Q8</button>
                    </div>
                    <div class="ml-auto mr-2 flex items-center gap-2">
                        <span class="text-xs text-gray-600 hidden sm:inline">Copy this question ‚Üí</span>
                        <button id="copy-button" class="btn btn-copy text-sm px-3 py-1.5">
                            üìã Copy
                        </button>
                    </div>
                </div>

                <!-- Question Panels Container -->
                <div class="flex-1 relative bg-white overflow-hidden">
                    
                    <!-- Question 5 Panel -->
                    <div id="q5-panel" class="question-panel active">
                        <textarea 
                            id="q5-editor" 
                            class="p-3 font-mono text-sm outline-none resize-none overflow-auto"
                            spellcheck="false"
                            placeholder="Question 5: Write your complete HTML document here..."
                        ></textarea>
                    </div>

                    <!-- Question 6 Panel -->
                    <div id="q6-panel" class="question-panel">
                        <textarea 
                            id="q6-editor" 
                            class="p-3 font-mono text-sm outline-none resize-none overflow-auto"
                            spellcheck="false"
                            placeholder="Question 6: Write your HTML code here..."
                        ></textarea>
                    </div>

                    <!-- Question 7 Panel -->
                    <div id="q7-panel" class="question-panel">
                        <textarea 
                            id="q7-editor" 
                            class="p-3 font-mono text-sm outline-none resize-none overflow-auto"
                            spellcheck="false"
                            placeholder="Question 7: Write your table HTML code here..."
                        ></textarea>
                    </div>

                    <!-- Question 8 Panel -->
                    <div id="q8-panel" class="question-panel">
                        <textarea 
                            id="q8-editor" 
                            class="p-3 font-mono text-sm outline-none resize-none overflow-auto"
                            spellcheck="false"
                            placeholder="Question 8: Write your CSS code here (no <style> tags needed)..."
                        ></textarea>
                    </div>

                </div>

            </div>

            <!-- Preview Panel Container -->
            <div class="w-full lg:w-1/2 flex flex-col">
                <label class="bg-gray-200 p-2 font-semibold text-gray-800 text-sm border-b border-gray-300 lg:border-l lg:border-b-0">
                    Preview
                </label>
                <iframe 
                    id="preview-frame" 
                    class="w-full h-full bg-white lg:border-l border-gray-300"
                    title="Live Preview Pane"
                    sandbox="allow-scripts allow-same-origin"
                ></iframe>
            </div>

        </main>
    </div>

    <!-- JavaScript -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const q5Editor = document.getElementById('q5-editor');
            const q6Editor = document.getElementById('q6-editor');
            const q7Editor = document.getElementById('q7-editor');
            const q8Editor = document.getElementById('q8-editor');
            const previewFrame = document.getElementById('preview-frame');
            const runButton = document.getElementById('run-button');
            const copyButton = document.getElementById('copy-button');

            let currentQuestion = 'q5';

            // Blank starting values - students write their own code
            const defaultQ5 = ``;
            const defaultQ6 = ``;
            const defaultQ7 = ``;
            const defaultQ8 = ``;

            // The HTML for Q8 (provided to students in the preview)
            const q8HTML = `<div class="card">
    <h2 id="card-title">Important Notice</h2>
    <p class="message">Please read carefully.</p>
    <button class="btn-primary">OK</button>
    <button class="btn-secondary">Cancel</button>
</div>`;

            // Set default values (blank)
            q5Editor.value = defaultQ5;
            q6Editor.value = defaultQ6;
            q7Editor.value = defaultQ7;
            q8Editor.value = defaultQ8;

            function updatePreview() {
                let srcDoc = '';

                switch(currentQuestion) {
                    case 'q5':
                        srcDoc = q5Editor.value || '<html><body><p style="color: gray; padding: 20px;">Write your HTML code and click Run to preview...</p></body></html>';
                        break;
                    
                    case 'q6':
                        srcDoc = `
                            <html>
                                <head>
                                    <style>
                                        body { font-family: Arial, sans-serif; padding: 20px; }
                                    </style>
                                </head>
                                <body>
                                    ${q6Editor.value || '<p style="color: gray;">Write your HTML code and click Run to preview...</p>'}
                                </body>
                            </html>
                        `;
                        break;
                    
                    case 'q7':
                        srcDoc = `
                            <html>
                                <head>
                                    <style>
                                        body { font-family: Arial, sans-serif; padding: 20px; }
                                        table { border-collapse: collapse; }
                                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                                        th { background-color: #f2f2f2; font-weight: bold; }
                                    </style>
                                </head>
                                <body>
                                    ${q7Editor.value || '<p style="color: gray;">Write your table code and click Run to preview...</p>'}
                                </body>
                            </html>
                        `;
                        break;
                    
                    case 'q8':
                        srcDoc = `
                            <html>
                                <head>
                                    <style>
                                        body { font-family: Arial, sans-serif; padding: 20px; }
                                        /* Your CSS will style the card below */
                                        ${q8Editor.value}
                                    </style>
                                </head>
                                <body>
                                    ${q8HTML}
                                </body>
                            </html>
                        `;
                        break;
                }

                previewFrame.srcdoc = srcDoc;
            }

            function copyCodeForSubmission() {
                let codeToCopy = '';
                let questionNum = '';

                switch(currentQuestion) {
                    case 'q5':
                        codeToCopy = q5Editor.value;
                        questionNum = '5';
                        break;
                    case 'q6':
                        codeToCopy = q6Editor.value;
                        questionNum = '6';
                        break;
                    case 'q7':
                        codeToCopy = q7Editor.value;
                        questionNum = '7';
                        break;
                    case 'q8':
                        codeToCopy = q8Editor.value;
                        questionNum = '8';
                        break;
                }

                // Check if there's code to copy
                if (!codeToCopy.trim()) {
                    copyButton.textContent = '‚ö† Nothing to copy';
                    copyButton.style.backgroundColor = '#dc3545';
                    
                    setTimeout(() => {
                        copyButton.textContent = 'üìã Copy';
                        copyButton.style.backgroundColor = '';
                    }, 2000);
                    return;
                }

                try {
                    const textarea = document.createElement('textarea');
                    textarea.value = codeToCopy;
                    textarea.style.position = 'fixed';
                    textarea.style.opacity = 0;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    
                    copyButton.textContent = `‚úì Q${questionNum} Copied!`;
                    copyButton.style.backgroundColor = '#10b981';
                    
                    setTimeout(() => {
                        copyButton.textContent = 'üìã Copy';
                        copyButton.style.backgroundColor = '';
                        copyButton.classList.add('btn-copy');
                    }, 2000);

                } catch (err) {
                    console.error('Failed to copy: ', err);
                    copyButton.textContent = '‚úó Failed';
                    copyButton.style.backgroundColor = '#dc3545';
                    
                    setTimeout(() => {
                        copyButton.textContent = 'üìã Copy';
                        copyButton.style.backgroundColor = '';
                    }, 3000);
                }
            }

            // Tab Switching
            const tabButtons = {
                'q5': document.getElementById('tab-q5'),
                'q6': document.getElementById('tab-q6'),
                'q7': document.getElementById('tab-q7'),
                'q8': document.getElementById('tab-q8')
            };
            const questionPanels = {
                'q5': document.getElementById('q5-panel'),
                'q6': document.getElementById('q6-panel'),
                'q7': document.getElementById('q7-panel'),
                'q8': document.getElementById('q8-panel')
            };

            function switchTab(targetQuestion) {
                Object.values(tabButtons).forEach(btn => btn.classList.remove('active'));
                Object.values(questionPanels).forEach(panel => panel.classList.remove('active'));
                
                tabButtons[targetQuestion].classList.add('active');
                questionPanels[targetQuestion].classList.add('active');
                
                currentQuestion = targetQuestion;
                updatePreview();
            }

            tabButtons.q5.addEventListener('click', () => switchTab('q5'));
            tabButtons.q6.addEventListener('click', () => switchTab('q6'));
            tabButtons.q7.addEventListener('click', () => switchTab('q7'));
            tabButtons.q8.addEventListener('click', () => switchTab('q8'));

            runButton.addEventListener('click', updatePreview);
            copyButton.addEventListener('click', copyCodeForSubmission);

            // Show initial blank preview
            updatePreview();

        });
    </script>

</body>
</html>
